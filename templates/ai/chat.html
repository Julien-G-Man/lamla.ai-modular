{% extends "base.html" %}
{% load static %}

{% block title %}Lamla AI Chatbot{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/chat.css' %}">
    <!-- Ensure Font Awesome is linked for the folder icon and close button -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %}

{% block footer %}{% endblock %}
f
{% block content %}
<div class="chat-container">
    <div class="chat-header">
        <h1>AI Tutor</h1>
        <span class="user-id-display" id="user-id-display">Connected</span>
    </div>

    <div id="chat-messages">
        <!-- Initial welcome message -->
        <div class="ai-message message-bubble">
            <div class="sender-name">AI Tutor</div>
            <p>ðŸ‘‹ Hello! I'm your AI study assistant. Ask me anything about your study materials or exams. Letâ€™s study smarter together!</p>
        </div>
    </div>

    <div id="typing-indicator" class="typing-indicator">
        <span class="typing-dot">.</span><span class="typing-dot">.</span><span class="typing-dot">.</span>
    </div>
    
    <!-- NEW: File display area -->
    <div id="file-status-bar" class="file-status-bar hidden">
        <span id="file-name-display" class="truncate"></span>
        <button id="clear-file-btn" title="Remove attachment">
            <i class="fas fa-times-circle"></i>
        </button>
    </div>

    <div class="chat-input-area">
        <label for="file-input" class="file-upload-btn" title="Upload Study Material">
            <i class="fas fa-folder"></i>
            <input type="file" id="file-input" accept=".pdf, .docx, .pptx, .txt">
        </label>
        <textarea id="message-input" placeholder="Ask me anything..." rows="1"></textarea>
        <button id="send-btn" title="Send Message" disabled>
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</div>
{% endblock %}

{% block extra_body %}
    <script type="module" src="{% static 'js/chat.js' %}"></script>
{% endblock %}
